
# æœåŠ¡è°ƒç”¨

## ğŸ¯ ä»€ä¹ˆæ˜¯æœåŠ¡è°ƒç”¨ï¼Ÿ

æœåŠ¡è°ƒç”¨æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­æœåŠ¡é—´é€šä¿¡çš„æ–¹å¼ï¼Œå®ƒè§£å†³äº†"æœåŠ¡å¦‚ä½•è°ƒç”¨"çš„é—®é¢˜ã€‚

### åŸºæœ¬æ¦‚å¿µ
```
æœåŠ¡è°ƒç”¨ = æœåŠ¡å‘ç° + è´Ÿè½½å‡è¡¡ + ç½‘ç»œé€šä¿¡ + é”™è¯¯å¤„ç†
```

**ç®€å•ç†è§£ï¼š**
- ä¸€ä¸ªæœåŠ¡éœ€è¦è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡çš„åŠŸèƒ½
- é€šè¿‡HTTPã€RPCç­‰æ–¹å¼è¿›è¡Œé€šä¿¡
- å¤„ç†ç½‘ç»œå»¶è¿Ÿã€è¶…æ—¶ã€é”™è¯¯ç­‰å¼‚å¸¸æƒ…å†µ

## ğŸ”§ ä¸»æµæœåŠ¡è°ƒç”¨æ–¹å¼

### åŠŸèƒ½å¯¹æ¯”è¡¨
| ç‰¹æ€§ | RestTemplate | OpenFeign | gRPC | WebClient |
|------|--------------|-----------|------|-----------|
| æ˜“ç”¨æ€§ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­ |
| æ€§èƒ½ | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| Springé›†æˆ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­â­ |

### é€‰æ‹©å»ºè®®
- **RestTemplate**ï¼šç®€å•åœºæ™¯ï¼ŒåŒæ­¥è°ƒç”¨
- **OpenFeign**ï¼šå£°æ˜å¼è°ƒç”¨ï¼Œä»£ç ç®€æ´
- **gRPC**ï¼šé«˜æ€§èƒ½ï¼Œè·¨è¯­è¨€
- **WebClient**ï¼šå¼‚æ­¥è°ƒç”¨ï¼Œå“åº”å¼ç¼–ç¨‹

## ğŸš€ RestTemplate ä½¿ç”¨

### åŸºæœ¬é…ç½®
```java
@Configuration
public class RestTemplateConfig {
    
    @Bean
    @LoadBalanced  // å¯ç”¨è´Ÿè½½å‡è¡¡
    public RestTemplate restTemplate() {
        return new RestTemplate();
    }
}
```

### åŸºç¡€ä½¿ç”¨
```java
@Service
public class UserServiceClient {
    
    @Autowired
    private RestTemplate restTemplate;
    
    public String getUserInfo(String userId) {
        String url = "http://user-service/user/info/" + userId;
        return restTemplate.getForObject(url, String.class);
    }
}
```

## ğŸš€ OpenFeign ä½¿ç”¨

### åŸºæœ¬é…ç½®
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-openfeign</artifactId>
</dependency>
```

### å¯åŠ¨ç±»é…ç½®
```java
@SpringBootApplication
@EnableFeignClients  // å¯ç”¨Feignå®¢æˆ·ç«¯
public class OrderServiceApplication {
    
    public static void main(String[] args) {
        SpringApplication.run(OrderServiceApplication.class, args);
    }
}
```

### æ¥å£å®šä¹‰
```java
@FeignClient(name = "user-service")
public interface UserFeignClient {
    
    @GetMapping("/user/info/{id}")
    String getUserInfo(@PathVariable("id") String id);
    
    @PostMapping("/user/create")
    String createUser(@RequestBody UserCreateRequest request);
}
```

## ğŸš¦ é”™è¯¯å¤„ç†

### å¼‚å¸¸å¤„ç†
```java
@Service
public class ErrorHandlingService {
    
    public String getUserInfoWithErrorHandling(String userId) {
        try {
            String url = "http://user-service/user/info/" + userId;
            return restTemplate.getForObject(url, String.class);
        } catch (Exception e) {
            return "ç”¨æˆ·æœåŠ¡å¼‚å¸¸: " + e.getMessage();
        }
    }
}
```

### é‡è¯•æœºåˆ¶
```java
@Service
public class RetryService {
    
    @Retryable(value = {Exception.class}, maxAttempts = 3)
    public String getUserInfoWithRetry(String userId) {
        String url = "http://user-service/user/info/" + userId;
        return restTemplate.getForObject(url, String.class);
    }
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### è¶…æ—¶é…ç½®
```yaml
spring:
  cloud:
    openfeign:
      client:
        config:
          default:
            connectTimeout: 5000
            readTimeout: 5000
```

### ç¼“å­˜æœºåˆ¶
```java
@Service
public class CachedUserServiceClient {
    
    @Cacheable(value = "userCache", key = "#userId")
    public String getUserInfoWithCache(String userId) {
        String url = "http://user-service/user/info/" + userId;
        return restTemplate.getForObject(url, String.class);
    }
}
```

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. æœåŠ¡è°ƒç”¨è¶…æ—¶
**è§£å†³æ–¹æ¡ˆï¼š** é…ç½®åˆç†çš„è¶…æ—¶æ—¶é—´

### 2. è´Ÿè½½å‡è¡¡ä¸ç”Ÿæ•ˆ
**è§£å†³æ–¹æ¡ˆï¼š** ä½¿ç”¨@LoadBalancedæ³¨è§£å’ŒæœåŠ¡åè°ƒç”¨

### 3. åºåˆ—åŒ–é—®é¢˜
**è§£å†³æ–¹æ¡ˆï¼š** é…ç½®Jacksonåºåˆ—åŒ–å™¨

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æœåŠ¡è°ƒç”¨é€‰æ‹©
- RestTemplateï¼šç®€å•åœºæ™¯ï¼ŒåŒæ­¥è°ƒç”¨
- OpenFeignï¼šå£°æ˜å¼è°ƒç”¨ï¼Œä»£ç ç®€æ´
- WebClientï¼šå¼‚æ­¥è°ƒç”¨ï¼Œå“åº”å¼ç¼–ç¨‹

### 2. é”™è¯¯å¤„ç†ç­–ç•¥
- ç»Ÿä¸€å¼‚å¸¸å¤„ç†
- é‡è¯•æœºåˆ¶
- ç†”æ–­é™çº§
- è¶…æ—¶æ§åˆ¶

## ğŸ”— ä¸‹ä¸€æ­¥å­¦ä¹ 

- [ç†”æ–­å™¨](./08.ç†”æ–­å™¨.md) - å­¦ä¹ ç†”æ–­é™çº§
- [åˆ†å¸ƒå¼äº‹åŠ¡](./09.åˆ†å¸ƒå¼äº‹åŠ¡.md) - å­¦ä¹ äº‹åŠ¡ç®¡ç†
- [æ¶ˆæ¯é˜Ÿåˆ—](./10.æ¶ˆæ¯é˜Ÿåˆ—.md) - å­¦ä¹ å¼‚æ­¥é€šä¿¡

---

**è®°ä½ï¼šæœåŠ¡è°ƒç”¨æ˜¯å¾®æœåŠ¡é€šä¿¡çš„åŸºç¡€ï¼ŒæŒæ¡å®ƒå°±èƒ½å®ç°æœåŠ¡é—´çš„åä½œï¼** ğŸ¯