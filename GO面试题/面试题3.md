go.modé¡¹ç›®çš„æ¨¡å—åï¼Œgoç‰ˆæœ¬çš„ï¼Œä¾èµ–åŒ…çš„åˆ—è¡¨ï¼Œé¡¹ç›®çš„æ¨¡å—åï¼Œgoçš„ç‰ˆæœ¬çš„ï¼Œä¾èµ–åŒ…çš„ç±»åˆ—è¡¨

go.sumè®°å½•æ¯ä¸ªåŒ…çš„ç‰ˆæœ¬å’Œæ ¡éªŒå’Œï¼Œç”¨äºéªŒè¯ä¾èµ–çš„å®Œæ•´æ€§çš„

go mod tidyæ¸…é™¤æ— ç”¨çš„ä¾èµ–æ·»åŠ ç¡®å®çš„ä¾èµ–çš„

go mod verifyæ ¡éªŒä»¥æ¥çš„å®Œæ•´æ€§çš„

go list -m allæŸ¥çœ‹æ‰€æœ‰çš„ä¾èµ–çš„æ¨¡å—çš„,go list -m all

go.sumè®°å½•æ¯ä¸€ä¸ªåŒ…çš„ç‰ˆæœ¬å’Œæ ¡éªŒå’Œï¼Œç”¨äºéªŒè¯ä¾èµ–çš„å®Œæ•´æ€§çš„ï¼Œgo.,odé¡¹ç›®çš„æ¨¡å—åï¼Œgoçš„ç‰ˆæœ¬å’Œä¾èµ–åŒ…çš„æç™½å“¦

go mod verifyæ ¡éªŒä¾èµ–åŒ…çš„å®Œæ•´æ€§çš„

go list -m allæŸ¥çœ‹æ‰€æœ‰çš„ä¾èµ–çš„æ¨¡å—çš„

internalå½“ä¸­çš„åŒ…æ˜¯ç§æœ‰åŒ…ï¼Œä¸èƒ½è¢«å¤–éƒ¨çš„é¡¹ç›®å¯¼å…¥çš„,pkgæ˜¯å…¬å…±çš„åŒ…ï¼Œåˆ«äººå¯ä»¥go getä½ çš„ä»“åº“å–ä½¿ç”¨çš„,cmd/ä¸‹çš„æ¯ä¸ª1ç›®å½•å¯¹åº”çš„ä¸€ä¸ªå¯ä»¥ä¾¿å®œçš„ç¨‹åºçš„ï¼Œcmd/ä¸‹çš„æ¯ä¸€ä¸ªç›®å½•å¯¹åº”ä¸€ä¸ªå¯ä»¥ç¼–è¯‘çš„ç¨‹åº

GOPATHè€æ–¹å¼ï¼Œæ‰€æœ‰çš„åŒ…å¿…é¡»åœ¨GOPATH/srcä¸‹çš„

go modulesæ¨¡å—åŒ–çš„ç®¡ç†ï¼Œä¸å—ç›®å½•é™åˆ¶çš„ç‰ˆæœ¬å¯æ§çš„

go.modè®°å½•ä½ éœ€è¦é‚£äº›åŒ…å’Œç‰ˆæœ¬çš„

go.sumæ˜¯æ ¡éªŒè¿™äº›åŒ…æ˜¯å¦å®Œæ•´çš„é˜²æ­¢ç¯¡æ”¹çš„,go.sumæ˜¯æ ¡éªŒè¿™äº›åŒ…æ˜¯å¦å®Œæ•´çš„ï¼Œé˜²æ­¢ç¯¡æ”¹çš„

å¥½ï¼Œæˆ‘ä»¬ç»§ç»­è¿›å…¥ Go çš„ **æ¨¡å—ç®¡ç†ä¸é¡¹ç›®ç»“æ„** â€”â€” è¿™æ˜¯æ„å»ºå¤§å‹ Go é¡¹ç›®çš„æ ¸å¿ƒåŸºç¡€ï¼Œæ¶‰åŠ `go mod`ã€ä¾èµ–å¼•å…¥ã€ç›®å½•è§„èŒƒç­‰å†…å®¹ã€‚

---

## âœ… ç¬¬åä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šGo Modules ä¸é¡¹ç›®ç»“æ„è§„èŒƒ

---

## ğŸ”¹ 1. ä»€ä¹ˆæ˜¯ Go Modulesï¼Ÿ

> `Go Modules` æ˜¯ Go å®˜æ–¹ä» 1.11 å¼€å§‹å¼•å…¥çš„åŒ…å’Œä¾èµ–ç®¡ç†å·¥å…·ï¼Œ**å–ä»£æ—§çš„ GOPATH æ¨¡å¼**ï¼Œç°ä»£ Go é¡¹ç›®çš„åŸºç¡€ã€‚

### âœ… åˆå§‹åŒ–æ¨¡å—ï¼š

```bash
go mod init your_module_name
```

ä¼šç”Ÿæˆ `go.mod` æ–‡ä»¶ï¼š

```go
module github.com/yourname/yourproject

go 1.21
```

---

## ğŸ”¹ 2. Go Modules çš„æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶       | è¯´æ˜                     |
| -------- | ---------------------- |
| `go.mod` | é¡¹ç›®çš„æ¨¡å—åã€Go ç‰ˆæœ¬ã€ä¾èµ–åŒ…åˆ—è¡¨     |
| `go.sum` | è®°å½•æ¯ä¸ªåŒ…çš„ç‰ˆæœ¬å’Œæ ¡éªŒå’Œï¼Œç”¨äºéªŒè¯ä¾èµ–å®Œæ•´æ€§ |

---

## ğŸ”¹ 3. æ·»åŠ å’Œç®¡ç†ä¾èµ–

### â¤ å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼š

```go
import "github.com/gin-gonic/gin"
```

ç¼–è¯‘æ—¶è‡ªåŠ¨æ·»åŠ ä¾èµ–åˆ° `go.mod`ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼š

```bash
go get github.com/gin-gonic/gin@v1.9.1
```

### â¤ æ›´æ–°/æ¸…ç†ä¾èµ–ï¼š

```bash
go mod tidy     # æ¸…ç†æ— ç”¨ä¾èµ–ï¼Œæ·»åŠ ç¼ºå¤±ä¾èµ–
go mod verify   # æ ¡éªŒä¾èµ–å®Œæ•´æ€§
go list -m all  # æŸ¥çœ‹æ‰€æœ‰ä¾èµ–æ¨¡å—
```

---

## ğŸ”¹ 4. é¡¹ç›®ç»“æ„è§„èŒƒï¼ˆæ¨èå®è·µï¼‰

### âœ… é€‚ç”¨äºä¸­å¤§å‹é¡¹ç›®çš„ç»“æ„ï¼š

```
your_project/
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ cmd/                  # ç¨‹åºå…¥å£ï¼ˆmainå‡½æ•°ï¼‰
â”‚   â””â”€â”€ your_app/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/             # åªèƒ½é¡¹ç›®å†…éƒ¨å¼•ç”¨çš„åŒ…
â”‚   â”œâ”€â”€ config/           # é…ç½®è¯»å–
â”‚   â”œâ”€â”€ service/          # ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ dao/              # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ pkg/                  # å¯å¤ç”¨å…¬å…±ä»£ç ï¼ˆå¯¹å¤–æš´éœ²ï¼‰
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ api/                  # è·¯ç”±å®šä¹‰
â”‚   â””â”€â”€ handler.go
â”œâ”€â”€ model/                # æ•°æ®ç»“æ„å®šä¹‰
â”œâ”€â”€ docs/                 # æ¥å£æ–‡æ¡£æˆ–é¡¹ç›®è¯´æ˜
â””â”€â”€ test/                 # æµ‹è¯•ä»£ç 
```

### ğŸ§  Go çº¦å®šä¿—æˆï¼š

* `internal/` ä¸­çš„åŒ…æ˜¯ **ç§æœ‰åŒ…**ï¼Œä¸èƒ½è¢«å¤–éƒ¨é¡¹ç›®å¯¼å…¥ã€‚
* `pkg/` æ˜¯å…¬å…±åŒ…ï¼Œåˆ«äººå¯ä»¥ `go get` ä½ çš„ä»“åº“ç”¨ã€‚
* `cmd/` ä¸‹æ¯ä¸€ä¸ªç›®å½•å¯¹åº”ä¸€ä¸ªå¯ç¼–è¯‘ç¨‹åºï¼ˆå¦‚å¾®æœåŠ¡çš„å­é¡¹ç›®ï¼‰ã€‚

---

## ğŸ”¹ 5. ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆæ¡†æ¶æ¨èï¼‰

| æ¡†æ¶ç±»åˆ«  | æ¨èåº“                                            | è¯´æ˜                      |
| ----- | ---------------------------------------------- | ----------------------- |
| Webæ¡†æ¶ | [Gin](https://github.com/gin-gonic/gin)        | é«˜æ€§èƒ½ã€æˆç†Ÿç¨³å®š                |
| ORM   | [GORM](https://gorm.io/)                       | æ•°æ®åº“æ“ä½œï¼ˆæ”¯æŒMySQLã€Postgresï¼‰ |
| æ—¥å¿—    | [Zap](https://github.com/uber-go/zap)          | Uber å‡ºå“é«˜æ€§èƒ½æ—¥å¿—åº“           |
| é…ç½®ç®¡ç†  | [Viper](https://github.com/spf13/viper)        | æ”¯æŒ JSONã€YAMLã€ENV ç­‰      |
| ä¾èµ–æ³¨å…¥  | [Wire](https://github.com/google/wire)         | Google å‡ºå“ä¾èµ–æ³¨å…¥æ¡†æ¶         |
| æµ‹è¯•    | [Testify](https://github.com/stretchr/testify) | å•å…ƒæµ‹è¯•æ–­è¨€å·¥å…·                |

---

## âœ… å¸¸è§é¢è¯•é¢˜æ€»ç»“

1. **GOPATH ä¸ Go Modules çš„åŒºåˆ«ï¼Ÿ**

   * GOPATHï¼šè€æ–¹å¼ï¼Œæ‰€æœ‰åŒ…å¿…é¡»åœ¨ `$GOPATH/src` ä¸‹ã€‚
   * Go Modulesï¼šæ¨¡å—åŒ–ç®¡ç†ï¼Œä¸å—ç›®å½•é™åˆ¶ï¼Œç‰ˆæœ¬å¯æ§ã€‚

2. **go.mod ä¸ go.sum åŒºåˆ«ï¼Ÿ**

   * go.mod è®°å½•ä½ éœ€è¦å“ªäº›åŒ…å’Œç‰ˆæœ¬ã€‚
   * go.sum æ˜¯æ ¡éªŒè¿™äº›åŒ…æ˜¯å¦å®Œæ•´ã€é˜²æ­¢ç¯¡æ”¹ã€‚

3. **å¦‚ä½•è§£å†³æ¨¡å—ç‰ˆæœ¬å†²çªï¼Ÿ**

   * ä½¿ç”¨ `replace` æ›¿æ¢æ¨¡å—ï¼š

     ```go
     replace github.com/xxx => ../local_module
     ```

4. **å¦‚ä½•åœ¨ä¸è”ç½‘æƒ…å†µä¸‹æ„å»ºï¼Ÿ**

   * ä½¿ç”¨ Go çš„ç¼“å­˜æœºåˆ¶æˆ– `go mod vendor`

---

## âœ… å®æˆ˜å»ºè®®

* ä½¿ç”¨ `go mod tidy` ä¿æŒä¾èµ–æ•´æ´ã€‚
* æ‰€æœ‰ä¸­å¤§å‹é¡¹ç›®éƒ½åº”è¯¥ç”¨æ¨¡å—åŒ–ç»“æ„ã€‚
* æŒ‰é¢†åŸŸåˆ’åˆ†ç›®å½•ç»“æ„ï¼ˆå¦‚ DDDï¼šdomain/service/repositoryï¼‰ã€‚
* é¡¹ç›®åˆæœŸå°±å¼•å…¥æ—¥å¿—ã€é…ç½®å’Œæµ‹è¯•æ¡†æ¶ã€‚

---

ä¸‹ä¸€èŠ‚æˆ‘ä»¬è®² **æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜ï¼ˆå•å…ƒæµ‹è¯•ã€åŸºå‡†æµ‹è¯•ã€pprofã€ç«æ€æ£€æµ‹ç­‰ï¼‰**

ç»§ç»­å°±è¯´ï¼š**ä¸‹ä¸€ä¸ª**ã€‚

æ ‡å‡†åº“çš„testingåŒ…çš„ï¼Œ

å¥½ï¼Œæˆ‘ä»¬ç»§ç»­è¿›å…¥ Go çš„ **æµ‹è¯•ä¸æ€§èƒ½ä¼˜åŒ–** é˜¶æ®µã€‚æµ‹è¯•æ˜¯é¢è¯•ä¸­ç»å¸¸ä¼šé—®çš„ç‚¹ï¼Œç‰¹åˆ«æ˜¯é¢å‘æœåŠ¡çš„å¼€å‘å²—ä½ï¼Œå¦‚å¾®æœåŠ¡ã€åç«¯æ¶æ„ç­‰ã€‚

---

## âœ… ç¬¬åäºŒä¸ªçŸ¥è¯†ç‚¹ï¼šGo å•å…ƒæµ‹è¯•ã€åŸºå‡†æµ‹è¯•ä¸æ€§èƒ½è°ƒä¼˜

---

## ğŸ”¹ 1. å•å…ƒæµ‹è¯•ï¼ˆUnit Testï¼‰

Go è¯­è¨€çš„æµ‹è¯•åŸºäºæ ‡å‡†åº“ `testing` åŒ…ã€‚

### âœ… ç¼–å†™æµ‹è¯•ç”¨ä¾‹

åˆ›å»ºæ–‡ä»¶ `xxx_test.go`ï¼Œå‡½æ•°åä»¥ `Test` å¼€å¤´ï¼š

```go
// file: math_utils.go
package utils

func Add(a, b int) int {
    return a + b
}
```

```go
// file: math_utils_test.go
package utils

import "testing"

func TestAdd(t *testing.T) {
    result := Add(2, 3)
    if result != 5 {
        t.Errorf("Expected 5, got %d", result)
    }
}
```

### âœ… è¿è¡Œæµ‹è¯•

```bash
go test ./...         # è¿è¡Œå½“å‰æ¨¡å—æ‰€æœ‰æµ‹è¯•
go test -v            # æ˜¾ç¤ºè¯¦ç»†æµ‹è¯•ä¿¡æ¯
```

---

## ğŸ”¹ 2. è¡¨æ ¼é©±åŠ¨æµ‹è¯•ï¼ˆæ¨èå†™æ³•ï¼‰

```go
func TestAdd(t *testing.T) {
    cases := []struct {
        name     string
        a, b     int
        expected int
    }{
        {"2+3", 2, 3, 5},
        {"-1+1", -1, 1, 0},
    }

    for _, c := range cases {
        t.Run(c.name, func(t *testing.T) {
            got := Add(c.a, c.b)
            if got != c.expected {
                t.Errorf("Expected %d, got %d", c.expected, got)
            }
        })
    }
}
```

---

## ğŸ”¹ 3. åŸºå‡†æµ‹è¯•ï¼ˆBenchmarkï¼‰

ç”¨äºæµ‹è¯•å‡½æ•°çš„æ€§èƒ½è¡¨ç°ã€‚

```go
func BenchmarkAdd(b *testing.B) {
    for i := 0; i < b.N; i++ {
        Add(2, 3)
    }
}
```

### âœ… è¿è¡ŒåŸºå‡†æµ‹è¯•

```bash
go test -bench=.          # è·‘æ‰€æœ‰åŸºå‡†æµ‹è¯•
go test -bench=Add        # ä»…æµ‹è¯• Add å‡½æ•°
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
BenchmarkAdd-8       1000000000         0.31 ns/op
```

---

## ğŸ”¹ 4. æ€§èƒ½è°ƒä¼˜å·¥å…·ï¼ˆpprofï¼‰

Go è‡ªå¸¦ **æ€§èƒ½åˆ†æå™¨ pprof**ï¼Œå¯åˆ†æ CPUã€å†…å­˜ã€é˜»å¡ç­‰æŒ‡æ ‡ã€‚

### âœ… å¼•å…¥ pprof åˆ°ä½ çš„ä»£ç ä¸­

```go
import _ "net/http/pprof"
import "net/http"

func main() {
    go func() {
        http.ListenAndServe("localhost:6060", nil)  // å¯åŠ¨pprofæœåŠ¡
    }()
    ...
}
```

æµè§ˆå™¨è®¿é—®ï¼š

```
http://localhost:6060/debug/pprof/
```

### âœ… å‘½ä»¤è¡Œåˆ†æï¼š

```bash
go tool pprof http://localhost:6060/debug/pprof/profile
```

---

## ğŸ”¹ 5. æ•°æ®ç«æ€æ£€æµ‹ï¼ˆRace Conditionï¼‰

å¤šåç¨‹å…±äº«å˜é‡çš„æƒ…å†µå¸¸è§äºå¹¶å‘ä¸­ï¼ŒGo æä¾› `-race` æ£€æµ‹æ•°æ®ç«äº‰ã€‚

```bash
go run -race main.go
go test -race ./...
```

ä¸€æ—¦æ£€æµ‹å‡ºå†²çªï¼ŒGo ä¼šç›´æ¥æŠ¥å‘Šæ˜¯å“ªè¡Œä»£ç å‡ºç°é—®é¢˜ã€‚

---

## ğŸ”¹ 6. ä½¿ç”¨ Mock è¿›è¡Œæ¥å£æµ‹è¯•

å¯ä»¥ä½¿ç”¨æ¥å£ + æ‰‹å†™ mock æˆ–ä½¿ç”¨æ¡†æ¶ï¼Œæ¯”å¦‚ [golang/mock](https://github.com/golang/mock)ã€‚

```bash
go install github.com/golang/mock/mockgen@latest
mockgen -source=your_interface.go -destination=mock/your_interface_mock.go -package=mock
```

---

## âœ… é¢è¯•å¸¸é—®é—®é¢˜æ€»ç»“

| é—®é¢˜             | ç®€è¦ç­”æ¡ˆè¯´æ˜                          |
| -------------- | ------------------------------- |
| Go çš„æµ‹è¯•æ€ä¹ˆç»„ç»‡ï¼Ÿ    | ä½¿ç”¨ `testing` åŒ…ï¼Œ`xxx_test.go` æ–‡ä»¶ |
| æ€ä¹ˆåšæ¥å£ mock æµ‹è¯•ï¼Ÿ | ä½¿ç”¨ `mockgen` æˆ–æ‰‹å†™å®ç°              |
| æ€ä¹ˆå‘ç°å¹¶å‘æ•°æ®é—®é¢˜ï¼Ÿ    | ä½¿ç”¨ `-race` æ£€æµ‹æ•°æ®ç«äº‰               |
| æ€ä¹ˆåšæ€§èƒ½åˆ†æï¼Ÿ       | ä½¿ç”¨ `pprof` å·¥å…·åˆ†æ CPU/å†…å­˜          |
| ä»€ä¹ˆæ˜¯è¡¨æ ¼é©±åŠ¨æµ‹è¯•ï¼Ÿ     | ç”¨ç»“æ„ä½“æ•°ç»„ç»„ç»‡å¤šä¸ªæµ‹è¯•è¾“å…¥è¾“å‡ºæ¡ˆä¾‹              |

---

## âœ… æ€»ç»“å»ºè®®

* æ¯å†™ä¸€ä¸ªæ ¸å¿ƒé€»è¾‘å‡½æ•°ï¼Œéƒ½åº”è¯¥é…ä¸€ä¸ªå•å…ƒæµ‹è¯•ã€‚
* å†™æœåŠ¡æ—¶ç”¨ `-race` è·‘ä¸€ééå¸¸æœ‰å¿…è¦ï¼Œé¿å…ç”Ÿäº§ bugã€‚
* ä¼˜åŒ–å‰å…ˆ profileï¼Œé¿å…ç›²ç›® micro-optimizeã€‚
* åŸºå‡†æµ‹è¯•æ—¶æ³¨æ„å…³é—­æ—¥å¿—ã€ç¼“å­˜ï¼Œä»¥å…å½±å“æµ‹è¯•ç»“æœã€‚

---

ä¸‹ä¸€ä¸ªæˆ‘ä»¬è®²è§£ï¼š**å¹¶å‘æ¨¡å‹ä¸ goroutineã€channelã€selectã€é”æœºåˆ¶ï¼ˆsync åŒ…ï¼‰**

ç»§ç»­å°±è¯´ï¼š**ä¸‹ä¸€ä¸ª**ã€‚
å¥½çš„ï¼Œæˆ‘ä»¬è¿›å…¥ Go è¯­è¨€éå¸¸æ ¸å¿ƒçš„ä¸€å—å†…å®¹ï¼š

---

## âœ… ç¬¬åä¸‰ä¸ªçŸ¥è¯†ç‚¹ï¼šGo å¹¶å‘æ¨¡å‹ï¼ˆgoroutineã€channelã€selectã€é”ï¼‰

---

Go å¹¶å‘æ¨¡å‹æ˜¯ Go åŒºåˆ«äºå…¶ä»–è¯­è¨€ï¼ˆå¦‚ Javaï¼‰çš„äº®ç‚¹ï¼Œå±äºé¢è¯•ä¸­**å¿…é—®é«˜é¢‘é¢˜**ã€‚

---

## ğŸ”¹ 1. goroutineï¼šè½»é‡çº¿ç¨‹

Go ä½¿ç”¨ `goroutine` å®ç°å¹¶å‘ã€‚ç›¸æ¯” Java çš„çº¿ç¨‹ï¼Œgoroutine éå¸¸è½»é‡ã€‚

### âœ… ç¤ºä¾‹

```go
func sayHello() {
    fmt.Println("Hello from goroutine!")
}

func main() {
    go sayHello()         // å¯åŠ¨ä¸€ä¸ª goroutine
    time.Sleep(time.Second)
}
```

> å¦‚æœ `main` ç»“æŸå¤ªå¿«ï¼Œgoroutine è¿˜æ²¡è·‘å®Œå°±ä¼šè¢«ç»ˆæ­¢ï¼Œæ‰€ä»¥ç”¨ `Sleep` ç­‰å¾…ã€‚

---

## ğŸ”¹ 2. channelï¼šgoroutine ä¹‹é—´é€šä¿¡

channel æ˜¯ Go åŸç”Ÿæä¾›çš„**çº¿ç¨‹å®‰å…¨**é€šä¿¡æ–¹å¼ã€‚

### âœ… å£°æ˜ & ä½¿ç”¨

```go
ch := make(chan int)  // åˆ›å»ºä¸€ä¸ª int ç±»å‹ channel

go func() {
    ch <- 42          // å‘é€æ•°æ®
}()

val := <-ch           // æ¥æ”¶æ•°æ®
fmt.Println(val)      // è¾“å‡ºï¼š42
```

---

### âœ… ç¼“å†² channel

```go
ch := make(chan int, 2)  // ç¼“å†²åŒºå¤§å°ä¸º2

ch <- 1
ch <- 2
// ch <- 3 ä¼šé˜»å¡ï¼Œå› ä¸ºç¼“å†²åŒºå·²æ»¡

fmt.Println(<-ch)  // 1
fmt.Println(<-ch)  // 2
```

---

### âœ… å•å‘ channelï¼ˆäº†è§£ï¼‰

```go
func producer(out chan<- int) {
    out <- 123
}

func consumer(in <-chan int) {
    val := <-in
    fmt.Println(val)
}
```

---

## ğŸ”¹ 3. selectï¼šç­‰å¾…å¤šä¸ª channel

ç”¨äºç›‘å¬å¤šä¸ª channel çš„è¯»å†™æ“ä½œã€‚

### âœ… ç¤ºä¾‹

```go
select {
case msg1 := <-ch1:
    fmt.Println("Received", msg1)
case msg2 := <-ch2:
    fmt.Println("Received", msg2)
default:
    fmt.Println("No data ready")
}
```

> ç±»ä¼¼ `switch`ï¼Œä½†ç”¨äº channel é€‰æ‹©ã€‚å¸¸ç”¨äºè¶…æ—¶ã€å–æ¶ˆç­‰å¹¶å‘æ§åˆ¶ã€‚

---

## ğŸ”¹ 4. sync åŒ…ï¼šäº’æ–¥é”ä¸ WaitGroup

---

### âœ… Mutexï¼ˆäº’æ–¥é”ï¼‰

é˜²æ­¢å¤šä¸ª goroutine åŒæ—¶ä¿®æ”¹å…±äº«å˜é‡ã€‚

```go
var mu sync.Mutex
count := 0

go func() {
    mu.Lock()
    count += 1
    mu.Unlock()
}()
```

---

### âœ… sync.WaitGroup

ç­‰å¾…å¤šä¸ª goroutine æ‰§è¡Œå®Œæ¯•ã€‚

```go
var wg sync.WaitGroup

for i := 0; i < 3; i++ {
    wg.Add(1)
    go func(i int) {
        defer wg.Done()
        fmt.Println("Goroutine", i)
    }(i)
}

wg.Wait()
```

---

## ğŸ”¹ 5. å¹¶å‘æ§åˆ¶åœºæ™¯ä¸¾ä¾‹

| åœºæ™¯             | æ¨èæ–¹å¼             |
| -------------- | ---------------- |
| å¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œ + ç­‰å¾…ç»“æœ | WaitGroup        |
| å¤šä»»åŠ¡å¹¶å‘ + è¶…æ—¶     | context + select |
| é™æµæ§åˆ¶           | channel ç¼“å†²åŒº      |
| é˜²æ­¢å…±äº«æ•°æ®å†²çª       | sync.Mutex       |

---

## ğŸ§  é¢è¯•å¸¸è€ƒé—®é¢˜

| é—®é¢˜                   | ç®€è¦è¯´æ˜                      |
| -------------------- | ------------------------- |
| goroutine æ˜¯çº¿ç¨‹å—ï¼Ÿ      | æ˜¯ç”¨æˆ·çº§çº¿ç¨‹ï¼Œæ›´è½»é‡                |
| channel æ˜¯é˜»å¡çš„å—ï¼Ÿ       | æ˜¯çš„ï¼Œå‘é€/æ¥æ”¶é»˜è®¤é˜»å¡              |
| select æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ        | ç›‘å¬å¤šä¸ª channel çš„è¯»å†™          |
| æ€ä¹ˆç­‰å¾…æ‰€æœ‰ goroutine ç»“æŸï¼Ÿ | sync.WaitGroup            |
| æ€ä¹ˆé˜²æ­¢å¹¶å‘å†™ map å‡ºé”™ï¼Ÿ      | ç”¨ sync.Mutex æˆ– sync.Map   |
| channel æ­»é”æœ‰å“ªäº›æƒ…å†µï¼Ÿ     | æ²¡æœ‰æ¥æ”¶æ–¹/å‘é€æ–¹ï¼Œå†™æ»¡æ— ç¼“å†² channel ç­‰ |

---

## âœ… æ€»ç»“å»ºè®®

* goroutine çš„åˆ›å»ºè¦è½»é‡ï¼Œä½†ä¸èƒ½æ— é™åˆ¶å¼€å¯ï¼Œå¦åˆ™ä¼šå†…å­˜æº¢å‡ºã€‚
* channel æ˜¯æœ€æ¨èçš„å¹¶å‘é€šä¿¡æ–¹å¼ï¼Œä¼˜äºå…±äº«å†…å­˜ã€‚
* `sync.WaitGroup` å’Œ `select` æ˜¯å¹¶å‘ä»£ç çš„å…³é”®æ­¦å™¨ã€‚
* ä¸è¦åœ¨å¤šä¸ª goroutine ä¸­ç›´æ¥æ“ä½œå…±äº« mapï¼Œå¿…é¡»åŠ é”æˆ–ç”¨ `sync.Map`ã€‚

---

ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹å°†æ˜¯ï¼š**Go æ ‡å‡†åº“ & å¸¸ç”¨å·¥å…·åŒ…ï¼ˆstrings, sort, time, context ç­‰ï¼‰**

å¦‚æœä½ æƒ³ç»§ç»­ï¼Œè¯·å›å¤ï¼š**ä¸‹ä¸€ä¸ª**ã€‚

